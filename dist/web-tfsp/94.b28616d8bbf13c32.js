"use strict";(self.webpackChunkweb_tfsp=self.webpackChunkweb_tfsp||[]).push([[94],{2094:(f,a,i)=>{i.r(a),i.d(a,{AuthModule:()=>h});var c=i(9808),l=i(6514),e=i(4893),m=i(6496),d=i(7252);let g=(()=>{class t{constructor(n,o,r){this.signInService=n,this.sessionService=o,this.router=r}ngOnInit(){if(console.log("this.sessionService.isValidSession()",this.sessionService.isValidSession()),this.sessionService.isValidSession()){console.log("is valid sesision");const o=this.sessionService.getAllSessionParameters(),r={access_token:o.ACCESS_TOKEN,refresh_token:o.REFRESH_TOKEN,scope:o.SCOPE,id_token:o.ID_TOKEN,token_type:o.TOKEN_TYPE,expires_in:parseInt(o.EXPIRES_IN)};return console.log("La sesi\xf3n es v\xe1lida",r),this.response_wso2=r,localStorage.setItem("login1",JSON.stringify(r)),localStorage.setItem("login3",JSON.stringify(this.sessionService.decodeIdToken(o.ID_TOKEN))),void this.router.navigate(["/user-area/index"])}const n=new URL(window.location.href).searchParams.get("code");n&&this.signInService.sendTokenRequest(n).then(o=>{console.log("TOKEN REQUEST SUCCESS",o),localStorage.setItem("login2",JSON.stringify(o)),localStorage.setItem("userName",JSON.stringify(this.sessionService.decodeIdToken(o.ID_TOKEN).sub)),this.sessionService.initAuthenticatedSession(o),this.router.navigate(["/user-area/index"])}).catch(o=>{console.log("TOKEN REQUEST ERROR",o),this.router.navigate(["/Public"])})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(m.y),e.Y36(d.m),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:29,vars:3,consts:[[2,"background-image","url(../../../assets/Images/full_screenlogin.jpeg)","background-size","cover","height","100vh"],[1,"row"],[1,"col-6"],["id","leftHalf",2,"margin-left","1em","margin-top","1em","border-radius","2em"],[1,"col-6","d-flex","align-items-center","justify-content-center",2,"height","100vh"],[1,"card",2,"height","60vh","width","80vh","border-radius","3em","padding-left","2em","padding-right","2em"],[1,"card-body"],[2,"font-size",".8em"],[1,"col-12","text-center"],["src","../../../assets/Images/fashions-park-logo.png","alt","...","width","300em",1,"imagen-logo","img-fluid","mt-4"],[1,"col-12","mt-2"],[1,"text-muted"],[1,"mb-3","mt-2"],["for","exampleFormControlInput1",1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","name@example.com",1,"form-control"],[1,"mb-4"],["for","exampleFormControlTextarea1",1,"form-label"],["type","password","id","exampleFormControlInput1","placeholder","name@example.com",1,"form-control"],["type","submit",1,"btn",2,"background-color","#aa0033","color","white","border-radius","5em","min-width","10em"]],template:function(n,o){1&n&&(e.TgZ(0,"body",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"p",7),e._uU(8),e.ALo(9,"json"),e.qZA(),e.TgZ(10,"div",1)(11,"div",8),e._UZ(12,"img",9),e.TgZ(13,"div",1)(14,"div",10)(15,"h4"),e._uU(16,"Bienvenido"),e.qZA(),e.TgZ(17,"h5",11),e._uU(18,"INGRESA TUS DATOS"),e.qZA()()(),e.TgZ(19,"div",12)(20,"label",13),e._uU(21,"Usuario"),e.qZA(),e._UZ(22,"input",14),e.qZA(),e.TgZ(23,"div",15)(24,"label",16),e._uU(25,"Password"),e.qZA(),e._UZ(26,"input",17),e.qZA(),e.TgZ(27,"button",18),e._uU(28,"Ingresar"),e.qZA()()()()()()()()),2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,o.response_wso2),""))},pipes:[c.Ts],styles:[".imagen-login[_ngcontent-%COMP%]{height:100vh}#leftHalf[_ngcontent-%COMP%]{background:url(image_login.3f08b3096dd8289b.png);width:48%;position:absolute;left:0px;height:95%}"]}),t})();const u=[{path:"",children:[{path:"login",component:g},{path:"register",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:2,vars:0,template:function(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"register works!"),e.qZA())},styles:[""]}),t})()},{path:"**",component:g}]}];let p=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.Bz.forChild(u)],l.Bz]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,p,l.Bz]]}),t})()}}]);